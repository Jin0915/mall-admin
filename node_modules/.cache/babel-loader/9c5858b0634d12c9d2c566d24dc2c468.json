{"remainingRequest":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/Goods/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/Goods/List.vue","mtime":1573870081729},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Goods } from '@/api/index';\nexport default {\n  data: function data() {\n    return {\n      tableData: [],\n      total: 0,\n      pageSize: 4,\n      pageIndex: 1\n    };\n  },\n  created: function created() {\n    this.loadGoodsList();\n  },\n  methods: {\n    loadGoodsList: function () {\n      var _loadGoodsList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, status, goods, total;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Goods.list({\n                  pageIndex: this.pageIndex,\n                  pageSize: this.pageSize\n                });\n\n              case 2:\n                _ref = _context.sent;\n                status = _ref.status;\n                goods = _ref.goods;\n                total = _ref.total;\n\n                if (status) {\n                  this.tableData = goods;\n                  this.total = total;\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadGoodsList() {\n        return _loadGoodsList.apply(this, arguments);\n      }\n\n      return loadGoodsList;\n    }(),\n    // 分页器改变页码数\n    currentPageChange: function currentPageChange(pageIndex) {\n      this.pageIndex = pageIndex;\n      this.loadGoodsList();\n    },\n    // 分页器pageSize改变\n    pageSizeChange: function pageSizeChange(size) {\n      this.pageSize = size;\n      this.loadGoodsList();\n    },\n    showDeleteModal: function () {\n      var _showDeleteModal = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(id) {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                this.$confirm('确定要删除该商品吗？删除之后无法恢复！！！', {\n                  type: 'warning'\n                }).then(\n                /*#__PURE__*/\n                _asyncToGenerator(\n                /*#__PURE__*/\n                regeneratorRuntime.mark(function _callee2() {\n                  var _ref3, status, msg;\n\n                  return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                    while (1) {\n                      switch (_context2.prev = _context2.next) {\n                        case 0:\n                          _context2.next = 2;\n                          return Goods.remove({\n                            id: id\n                          });\n\n                        case 2:\n                          _ref3 = _context2.sent;\n                          status = _ref3.status;\n                          msg = _ref3.msg;\n\n                          if (status) {\n                            _this.$message.success('删除成功！');\n\n                            _this.loadGoodsList();\n                          }\n\n                        case 6:\n                        case \"end\":\n                          return _context2.stop();\n                      }\n                    }\n                  }, _callee2);\n                }))).catch(function () {\n                  _this.$message.info('已取消删除');\n                });\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function showDeleteModal(_x) {\n        return _showDeleteModal.apply(this, arguments);\n      }\n\n      return showDeleteModal;\n    }()\n  }\n};",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,SAAA,KAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,CAFA;AAGA,MAAA,QAAA,EAAA,CAHA;AAIA,MAAA,SAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,OATA,qBASA;AACA,SAAA,aAAA;AACA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,aADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,KAAA,CAAA,IAAA,CAAA;AACA,kBAAA,SAAA,EAAA,KAAA,SADA;AAEA,kBAAA,QAAA,EAAA,KAAA;AAFA,iBAAA,CAFA;;AAAA;AAAA;AAEA,gBAAA,MAFA,QAEA,MAFA;AAEA,gBAAA,KAFA,QAEA,KAFA;AAEA,gBAAA,KAFA,QAEA,KAFA;;AAMA,oBAAA,MAAA,EAAA;AACA,uBAAA,SAAA,GAAA,KAAA;AACA,uBAAA,KAAA,GAAA,KAAA;AACA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAWA;AACA,IAAA,iBAZA,6BAYA,SAZA,EAYA;AACA,WAAA,SAAA,GAAA,SAAA;AACA,WAAA,aAAA;AACA,KAfA;AAgBA;AACA,IAAA,cAjBA,0BAiBA,IAjBA,EAiBA;AACA,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,aAAA;AACA,KApBA;AAqBA,IAAA,eArBA;AAAA;AAAA;AAAA,gDAqBA,EArBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAsBA,qBAAA,QAAA,CAAA,uBAAA,EAAA;AACA,kBAAA,IAAA,EAAA;AADA,iBAAA,EAGA,IAHA;AAAA;AAAA;AAAA;AAAA,wCAGA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCACA,KAAA,CAAA,MAAA,CAAA;AAAA,4BAAA,EAAA,EAAA;AAAA,2BAAA,CADA;;AAAA;AAAA;AACA,0BAAA,MADA,SACA,MADA;AACA,0BAAA,GADA,SACA,GADA;;AAEA,8BAAA,MAAA,EAAA;AACA,4BAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,4BAAA,KAAA,CAAA,aAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHA,IAUA,KAVA,CAUA,YAAA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,iBAZA;;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAZA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<el-card class=\"box-card\">\n\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t<span>商品列表</span>\n\t\t\t</div>\n\t\t\t<!-- 表格 -->\n\t\t\t<el-table :data=\"tableData\" style=\"width:100%\">\n\t\t\t\t<el-table-column fixed label=\"商品名称\" width=\"550\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<div class=\"goods\">\n\t\t\t\t\t\t\t<div class=\"img\">\n\t\t\t\t\t\t\t\t<img :src=\"scope.row.img_md\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"name\">\n\t\t\t\t\t\t\t\t<span>{{scope.row.name}}</span>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<span>商品货号：{{scope.row.articleNo}}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column sortable prop=\"price\" label=\"价格\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column sortable prop=\"inventory\" label=\"库存\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column sortable prop=\"create_time\" label=\"发布时间\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<router-link class=\"am-margin-right-sm\" :to=\"{ name: 'GoodsEdit', params: { id: scope.row.id }}\">\n\t\t\t\t\t\t\t<el-button type=\"primary\" plain icon=\"el-icon-edit\" size=\"small\"></el-button>\n\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t<el-button @click=\"showDeleteModal(scope.row.id)\" icon=\"el-icon-delete\" plain type=\"danger\"></el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t\t<!-- 分页器 -->\n\t\t\t<el-pagination :page-sizes=\"[4,8,16,32]\" :page-size=\"pageSize\" :total=\"total\" @size-change=\"pageSizeChange\"\n\t\t\t @current-change=\"currentPageChange\" background layout=\"->,prev,pager,next,sizes,total\" class=\"am-margin-top-sm\"></el-pagination>\n\t\t</el-card>\n\t</div>\n</template>\n<script>\n\timport { Goods } from '@/api/index';\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttableData: [],\n\t\t\t\ttotal: 0,\n\t\t\t\tpageSize: 4,\n\t\t\t\tpageIndex: 1,\n\t\t\t};\n\t\t},\n\t\tcreated() {\n\t\t\tthis.loadGoodsList();\n\t\t},\n\t\tmethods: {\n\t\t\tasync loadGoodsList() {\n\t\t\t\tlet { status, goods, total } = await Goods.list({\n\t\t\t\t\tpageIndex: this.pageIndex,\n\t\t\t\t\tpageSize: this.pageSize,\n\t\t\t\t});\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.tableData = goods;\n\t\t\t\t\tthis.total = total;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 分页器改变页码数\n\t\t\tcurrentPageChange(pageIndex) {\n\t\t\t\tthis.pageIndex = pageIndex;\n\t\t\t\tthis.loadGoodsList();\n\t\t\t},\n\t\t\t// 分页器pageSize改变\n\t\t\tpageSizeChange(size) {\n\t\t\t\tthis.pageSize = size;\n\t\t\t\tthis.loadGoodsList();\n\t\t\t},\n\t\t\tasync showDeleteModal(id) {\n\t\t\t\tthis.$confirm('确定要删除该商品吗？删除之后无法恢复！！！', {\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t})\n\t\t\t\t\t.then(async () => {\n\t\t\t\t\t\tlet { status, msg } = await Goods.remove({ id });\n\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\tthis.$message.success('删除成功！');\n\t\t\t\t\t\t\tthis.loadGoodsList();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.$message.info('已取消删除');\n\t\t\t\t\t});\n\t\t\t},\n\t\t}\n\t};\n</script>\n<style lang=\"scss\" scoped>\n\t.goods {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\t.img {\n\t\t\tmargin-right: 6px;\n\t\t\tborder: 1px solid #eee;\n\t\t}\n\n\t\t.img img {\n\t\t\twidth: 80px;\n\t\t\tdisplay: block;\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/views/Goods"}]}