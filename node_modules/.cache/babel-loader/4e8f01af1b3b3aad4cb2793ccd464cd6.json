{"remainingRequest":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/User/List.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/User/List.vue","mtime":1573870081730},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//引入service模块\nimport { User, Role } from '@/api/index';\nimport SingleUpload from '@/components/SingleUpload.vue';\nexport default {\n  name: \"List\",\n  components: {\n    SingleUpload: SingleUpload\n  },\n  data: function data() {\n    return {\n      tableData: [],\n      roles: [],\n      editModalShow: false,\n      form: {\n        id: \"\",\n        nickname: \"\",\n        sex: \"男\",\n        tel: \"\",\n        role: \"\",\n        avatar: \"\"\n      }\n    };\n  },\n  created: function created() {\n    this.loadList();\n    this.loadRole();\n  },\n  methods: {\n    loadList: function () {\n      var _loadList = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, status, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return User.list();\n\n              case 2:\n                _ref = _context.sent;\n                status = _ref.status;\n                data = _ref.data;\n\n                if (status) {\n                  this.tableData = data;\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadList() {\n        return _loadList.apply(this, arguments);\n      }\n\n      return loadList;\n    }(),\n    loadRole: function () {\n      var _loadRole = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref2, status, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return Role.list();\n\n              case 2:\n                _ref2 = _context2.sent;\n                status = _ref2.status;\n                data = _ref2.data;\n\n                if (status) {\n                  this.roles = data;\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function loadRole() {\n        return _loadRole.apply(this, arguments);\n      }\n\n      return loadRole;\n    }(),\n    showEditModal: function showEditModal(row) {\n      this.editModalShow = true;\n      this.form = _objectSpread({}, row);\n    },\n    showDeleteModal: function showDeleteModal(id) {\n      var _this = this;\n\n      this.$confirm('此操作将永久删除该账户, 是否继续?', {\n        type: 'warning'\n      }).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _ref4, status, msg;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return User.remove({\n                  id: id\n                });\n\n              case 2:\n                _ref4 = _context3.sent;\n                status = _ref4.status;\n                msg = _ref4.msg;\n\n                if (status) {\n                  _this.$message.success('删除成功！');\n\n                  _this.loadList();\n                }\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }))).catch(function () {\n        _this.$message.info('已取消删除');\n      });\n    },\n    // 修改账户信息\n    updateInfo: function () {\n      var _updateInfo = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _ref5, status, msg;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return User.update(_objectSpread({}, this.form));\n\n              case 2:\n                _ref5 = _context4.sent;\n                status = _ref5.status;\n                msg = _ref5.msg;\n\n                if (status) {\n                  this.editModalShow = false;\n                  this.$message.success(msg);\n                  this.loadList();\n                }\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function updateInfo() {\n        return _updateInfo.apply(this, arguments);\n      }\n\n      return updateInfo;\n    }()\n  }\n};",{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA,SAAA,IAAA,EAAA,IAAA,QAAA,aAAA;AACA,OAAA,YAAA,MAAA,+BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,aAAA,EAAA,KAHA;AAIA,MAAA,IAAA,EAAA;AACA,QAAA,EAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,GAAA,EAAA,GAHA;AAIA,QAAA,GAAA,EAAA,EAJA;AAKA,QAAA,IAAA,EAAA,EALA;AAMA,QAAA,MAAA,EAAA;AANA;AAJA,KAAA;AAaA,GAnBA;AAoBA,EAAA,OApBA,qBAoBA;AACA,SAAA,QAAA;AACA,SAAA,QAAA;AACA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,IAAA,CAAA,IAAA,EAFA;;AAAA;AAAA;AAEA,gBAAA,MAFA,QAEA,MAFA;AAEA,gBAAA,IAFA,QAEA,IAFA;;AAGA,oBAAA,MAAA,EAAA;AACA,uBAAA,SAAA,GAAA,IAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAOA,IAAA,QAPA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAQA,IAAA,CAAA,IAAA,EARA;;AAAA;AAAA;AAQA,gBAAA,MARA,SAQA,MARA;AAQA,gBAAA,IARA,SAQA,IARA;;AASA,oBAAA,MAAA,EAAA;AACA,uBAAA,KAAA,GAAA,IAAA;AACA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAaA,IAAA,aAbA,yBAaA,GAbA,EAaA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,WAAA,IAAA,qBAAA,GAAA;AACA,KAhBA;AAiBA,IAAA,eAjBA,2BAiBA,EAjBA,EAiBA;AAAA;;AACA,WAAA,QAAA,CAAA,oBAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OAAA,EAGA,IAHA;AAAA;AAAA;AAAA;AAAA,8BAGA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,IAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,EAAA,EAAA;AAAA,iBAAA,CADA;;AAAA;AAAA;AACA,gBAAA,MADA,SACA,MADA;AACA,gBAAA,GADA,SACA,GADA;;AAEA,oBAAA,MAAA,EAAA;AACA,kBAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,OAAA;;AACA,kBAAA,KAAA,CAAA,QAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAHA,IAUA,KAVA,CAUA,YAAA;AACA,QAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA,OAZA;AAaA,KA/BA;AAgCA;AACA,IAAA,UAjCA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAkCA,IAAA,CAAA,MAAA,mBAAA,KAAA,IAAA,EAlCA;;AAAA;AAAA;AAkCA,gBAAA,MAlCA,SAkCA,MAlCA;AAkCA,gBAAA,GAlCA,SAkCA,GAlCA;;AAmCA,oBAAA,MAAA,EAAA;AACA,uBAAA,aAAA,GAAA,KAAA;AACA,uBAAA,QAAA,CAAA,OAAA,CAAA,GAAA;AACA,uBAAA,QAAA;AACA;;AAvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAxBA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<el-card class=\"box-card\">\n\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t<span>用户列表</span>\n\t\t\t</div>\n\t\t\t<el-table :data=\"tableData\" style=\"width: 100%\">\n\t\t\t\t<el-table-column prop=\"id\" label=\"#\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column sortable label=\"头像\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<img :src=\"scope.row.avatar\" class=\"avatar\" width=\"60\" alt=\"\">\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"username\" sortable label=\"账号\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"fullname\" sortable label=\"姓名\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"sex\" sortable label=\"性别\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"tel\" sortable label=\"手机\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"role_name\" sortable label=\"角色\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-tag :type=\"scope.row.role===1?'danger':''\">{{scope.row.role_name}}</el-tag>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"login_time\" width=\"160\" sortable label=\"上次登录\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column prop=\"login_count\" sortable label=\"登录次数\">\n\t\t\t\t</el-table-column>\n\t\t\t\t<el-table-column label=\"操作\">\n\t\t\t\t\t<template slot-scope=\"scope\">\n\t\t\t\t\t\t<el-button @click=\"showEditModal(scope.row)\" plain icon=\"el-icon-edit\" size=\"small\" type=\"primary\"></el-button>\n\t\t\t\t\t\t<el-button @click=\"showDeleteModal(scope.row.id)\" :disabled=\"scope.row.id==1\" icon=\"el-icon-delete\" plain size=\"small\"\n\t\t\t\t\t\t type=\"danger\"></el-button>\n\t\t\t\t\t</template>\n\t\t\t\t</el-table-column>\n\t\t\t</el-table>\n\t\t</el-card>\n\t\t<!--编辑数据-->\n\t\t<el-dialog title=\"修改信息\" :visible.sync=\"editModalShow\">\n\t\t\t<el-form :model=\"form\" label-position=\"left\" label-width=\"80px\">\n\t\t\t\t<el-form-item label=\"姓名\">\n\t\t\t\t\t<el-input v-model=\"form.fullname\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"form.sex\">\n\t\t\t\t\t\t<el-radio label=\"男\">男</el-radio>\n\t\t\t\t\t\t<el-radio label=\"女\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机\">\n\t\t\t\t\t<el-input v-model.number=\"form.tel\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"权限\">\n\t\t\t\t\t<el-select v-model=\"form.role\" placeholder=\"请选择账户\">\n\t\t\t\t\t\t<el-option v-for=\"item in roles\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"头像\">\n\t\t\t\t\t<single-upload default-image=\"/images/avatar/default.jpg\" action=\"/api/upload/avatar/\" :url.sync=\"form.avatar\" />\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\n\t\t\t\t<el-button @click=\"editModalShow = false\">取 消</el-button>\n\t\t\t\t<el-button type=\"primary\" @click=\"updateInfo\">确 定</el-button>\n\t\t\t</div>\n\t\t</el-dialog>\n\t</div>\n</template>\n\n<script>\n\t//引入service模块\n\timport { User, Role } from '@/api/index'\n\timport SingleUpload from '@/components/SingleUpload.vue';\n\n\texport default {\n\t\tname: \"List\",\n\t\tcomponents: {\n\t\t\tSingleUpload,\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttableData: [],\n\t\t\t\troles: [],\n\t\t\t\teditModalShow: false,\n\t\t\t\tform: {\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tnickname: \"\",\n\t\t\t\t\tsex: \"男\",\n\t\t\t\t\ttel: \"\",\n\t\t\t\t\trole: \"\",\n\t\t\t\t\tavatar: \"\",\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tcreated() {\n\t\t\tthis.loadList();\n\t\t\tthis.loadRole();\n\t\t},\n\t\tmethods: {\n\t\t\tasync loadList() {\n\t\t\t\tlet { status, data } = await User.list();\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.tableData = data;\n\t\t\t\t}\n\t\t\t},\n\t\t\tasync loadRole() {\n\t\t\t\tlet { status, data } = await Role.list();\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.roles = data;\n\t\t\t\t}\n\t\t\t},\n\t\t\tshowEditModal(row) {\n\t\t\t\tthis.editModalShow = true;\n\t\t\t\tthis.form = { ...row };\n\t\t\t},\n\t\t\tshowDeleteModal(id) {\n\t\t\t\tthis.$confirm('此操作将永久删除该账户, 是否继续?', {\n\t\t\t\t\t\ttype: 'warning'\n\t\t\t\t\t})\n\t\t\t\t\t.then(async () => {\n\t\t\t\t\t\tlet { status, msg } = await User.remove({ id });\n\t\t\t\t\t\tif (status) {\n\t\t\t\t\t\t\tthis.$message.success('删除成功！');\n\t\t\t\t\t\t\tthis.loadList();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\tthis.$message.info('已取消删除');\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t// 修改账户信息\n\t\t\tasync updateInfo() {\n\t\t\t\tlet { status, msg } = await User.update({ ...this.form });\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.editModalShow = false;\n\t\t\t\t\tthis.$message.success(msg);\n\t\t\t\t\tthis.loadList();\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t};\n</script>\n\n<style scoped>\n\t.cell .avatar {\n\t\tborder-radius: 50%;\n\t}\n</style>\n"],"sourceRoot":"src/views/User"}]}