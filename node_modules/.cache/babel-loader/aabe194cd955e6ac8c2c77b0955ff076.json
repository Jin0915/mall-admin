{"remainingRequest":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/Goods/Release.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/Goods/Release.vue","mtime":1573870081729},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _toConsumableArray from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Upload, Category, Goods } from '@/api/index';\nimport E from \"wangeditor\";\nexport default {\n  data: function data() {\n    return {\n      dialogImageUrl: '',\n      dialogVisible: false,\n      headers: {\n        Authorization: \"Bearer \".concat(sessionStorage.token)\n      },\n      form: {\n        cate_1st: \"\",\n        cate_2nd: \"\",\n        cate_3rd: \"\",\n        hotPoint: \"\",\n        name: \"\",\n        price: \"\",\n        marketPrice: \"\",\n        cost: \"\",\n        discount: \"\",\n        inventory: \"\",\n        articleNo: \"\",\n        img_lg: \"\",\n        img_md: \"\",\n        slider: \"\",\n        brand: \"\",\n        detail: \"\",\n        freight: \"0\",\n        province: \"山东省\",\n        city: \"青岛市\",\n        area: \"城阳区\"\n      },\n      cate_1st_options: [],\n      cate_2nd_options: [],\n      cate_3rd_options: []\n    };\n  },\n  computed: {\n    discount: function discount() {\n      var num = (this.form.price / this.form.marketPrice * 10).toFixed(2);\n      this.form.discount = num;\n\n      switch (num) {\n        case 'NaN':\n          return '';\n          break;\n\n        case 'Infinity':\n          return '';\n          break;\n\n        default:\n          return num;\n          break;\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    var editor = new E(this.$refs.toolbar, this.$refs.editor);\n    editor.customConfig.zIndex = 100; //配置上传图片\n\n    editor.customConfig.uploadImgServer = '/api/upload/editor/';\n    editor.customConfig.uploadFileName = 'file'; // 配置header信息\n\n    editor.customConfig.uploadImgHeaders = {\n      Authorization: \"Bearer \".concat(sessionStorage.token)\n    }; //同步HTML代码至data\n\n    editor.customConfig.onchange = function (html) {\n      _this.form.detail = html;\n    };\n\n    editor.create();\n  },\n  created: function created() {\n    this.cateChangeHandle(1, 'cate_1st');\n  },\n  watch: {\n    'form.cate_1st': function formCate_1st(newValue, oldValue) {\n      this.cateChangeHandle(newValue, 'cate_2nd');\n    },\n    'form.cate_2nd': function formCate_2nd(newValue, oldValue) {\n      this.cateChangeHandle(newValue, 'cate_3rd');\n    }\n  },\n  methods: {\n    //分类change事件\n    cateChangeHandle: function cateChangeHandle(id, cate) {\n      var _this2 = this;\n\n      if (!id) {\n        return false;\n      }\n\n      this.getOptions(id).then(function (data) {\n        _this2[cate + '_options'] = data; //如果数组为空，下一级分类设置为空\n\n        if (data.length == 0) {\n          _this2.form[cate] = '';\n          return false;\n        } //默认选择数组第一项\n\n\n        _this2.form[cate] = data[0].id;\n      });\n    },\n    //获取下一级分类\n    getOptions: function () {\n      var _getOptions = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id) {\n        var _ref, status, data, msg;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Category.load({\n                  pId: id\n                });\n\n              case 2:\n                _ref = _context.sent;\n                status = _ref.status;\n                data = _ref.data;\n                msg = _ref.msg;\n\n                if (!status) {\n                  _context.next = 10;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", Promise.resolve(data));\n\n              case 10:\n                this.$message.error(msg);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getOptions(_x) {\n        return _getOptions.apply(this, arguments);\n      }\n\n      return getOptions;\n    }(),\n    handleMainSuccess: function handleMainSuccess(_ref2) {\n      var status = _ref2.status,\n          lgImg = _ref2.lgImg,\n          mdImg = _ref2.mdImg;\n\n      if (status) {\n        this.form.img_lg = lgImg;\n        this.form.img_md = mdImg;\n      }\n    },\n    handleError: function handleError(_ref3, file, fileList) {\n      var status = _ref3.status,\n          message = _ref3.message;\n\n      switch (status) {\n        case 401:\n          this.$message.error(\"\\u9519\\u8BEF:401,Token\\u5931\\u6548,\\u8BF7\\u91CD\\u65B0\\u767B\\u5F55!\");\n          break;\n\n        case 400:\n          message = JSON.parse(message);\n          this.$message.error(\"\\u9519\\u8BEF:400,\".concat(message.msg));\n          break;\n\n        default:\n          this.$message.error(\"\\u9519\\u8BEF:\".concat(status, \",\").concat(message, \"!\"));\n          break;\n      }\n    },\n    handleBeforeUpload: function handleBeforeUpload(file) {\n      var reg = /^image\\/(jpe?g|png)$/;\n      var isImg = reg.test(file.type);\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isImg) {\n        this.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isImg && isLt2M;\n    },\n    handleMainBeforeRemove: function () {\n      var _handleMainBeforeRemove = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2(file, fileList) {\n        var res1, res2;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return Upload.remove({\n                  src: '.' + file.response.lgImg\n                });\n\n              case 3:\n                res1 = _context2.sent;\n                _context2.next = 6;\n                return Upload.remove({\n                  src: '.' + file.response.mdImg\n                });\n\n              case 6:\n                res2 = _context2.sent;\n\n                if (!(res1.status && res2.status)) {\n                  _context2.next = 13;\n                  break;\n                }\n\n                //清空图片\n                this.form.img_lg = '';\n                this.form.img_md = '';\n                return _context2.abrupt(\"return\", true);\n\n              case 13:\n                return _context2.abrupt(\"return\", false);\n\n              case 14:\n                _context2.next = 19;\n                break;\n\n              case 16:\n                _context2.prev = 16;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.$message.error(_context2.t0);\n\n              case 19:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 16]]);\n      }));\n\n      function handleMainBeforeRemove(_x2, _x3) {\n        return _handleMainBeforeRemove.apply(this, arguments);\n      }\n\n      return handleMainBeforeRemove;\n    }(),\n    handleCardPreview: function handleCardPreview(file) {\n      this.dialogImageUrl = file.url;\n      this.dialogVisible = true;\n    },\n    handleMainExceed: function handleMainExceed(files, fileList) {\n      this.$message.warning(\"\\u5F53\\u524D\\u9650\\u5236\\u9009\\u62E9 1 \\u4E2A\\u6587\\u4EF6\\uFF0C\\u672C\\u6B21\\u9009\\u62E9\\u4E86 \".concat(files.length, \" \\u4E2A\\u6587\\u4EF6\\uFF0C\\u5171\\u9009\\u62E9\\u4E86 \").concat(files.length + fileList.length, \" \\u4E2A\\u6587\\u4EF6\"));\n    },\n    handleSliderSuccess: function handleSliderSuccess(response, file, fileList) {\n      if (response.status) {\n        this.form.slider = this.convertFileList(fileList);\n      }\n    },\n    handleSliderExceed: function handleSliderExceed(files, fileList) {\n      this.$message.warning(\"\\u5F53\\u524D\\u9650\\u5236\\u9009\\u62E9 6 \\u4E2A\\u6587\\u4EF6\\uFF0C\\u672C\\u6B21\\u9009\\u62E9\\u4E86 \".concat(files.length, \" \\u4E2A\\u6587\\u4EF6\\uFF0C\\u5171\\u9009\\u62E9\\u4E86 \").concat(files.length + fileList.length, \" \\u4E2A\\u6587\\u4EF6\"));\n    },\n    handleSliderBeforeRemove: function () {\n      var _handleSliderBeforeRemove = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3(file, fileList) {\n        var _ref4, status, i, copy;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return Upload.remove({\n                  src: \".\" + file.response.src\n                });\n\n              case 2:\n                _ref4 = _context3.sent;\n                status = _ref4.status;\n\n                if (!status) {\n                  _context3.next = 12;\n                  break;\n                }\n\n                i = fileList.findIndex(function (item) {\n                  return item.url == file.response.src;\n                });\n                copy = _toConsumableArray(fileList);\n                copy.splice(i, 1);\n                this.form.slider = this.convertFileList(copy);\n                return _context3.abrupt(\"return\", true);\n\n              case 12:\n                return _context3.abrupt(\"return\", false);\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleSliderBeforeRemove(_x4, _x5) {\n        return _handleSliderBeforeRemove.apply(this, arguments);\n      }\n\n      return handleSliderBeforeRemove;\n    }(),\n    //转换数据格式\n    convertFileList: function convertFileList(fileList) {\n      var res = [];\n      fileList.forEach(function (item, index) {\n        res.push(item.response.src);\n      });\n      return res.toString();\n    },\n    //发布商品\n    releaseHandle: function () {\n      var _releaseHandle = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee4() {\n        var _ref5, status;\n\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return Goods.release(_objectSpread({}, this.form));\n\n              case 2:\n                _ref5 = _context4.sent;\n                status = _ref5.status;\n\n                if (status) {\n                  this.$message.success('发布商品成功！');\n                }\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function releaseHandle() {\n        return _releaseHandle.apply(this, arguments);\n      }\n\n      return releaseHandle;\n    }()\n  }\n};",{"version":3,"sources":["Release.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA,SAAA,MAAA,EAAA,QAAA,EAAA,KAAA,QAAA,aAAA;AACA,OAAA,CAAA,MAAA,YAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,cAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AACA,QAAA,aAAA,mBAAA,cAAA,CAAA,KAAA;AADA,OAHA;AAMA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA,EAJA;AAKA,QAAA,IAAA,EAAA,EALA;AAMA,QAAA,KAAA,EAAA,EANA;AAOA,QAAA,WAAA,EAAA,EAPA;AAQA,QAAA,IAAA,EAAA,EARA;AASA,QAAA,QAAA,EAAA,EATA;AAUA,QAAA,SAAA,EAAA,EAVA;AAWA,QAAA,SAAA,EAAA,EAXA;AAYA,QAAA,MAAA,EAAA,EAZA;AAaA,QAAA,MAAA,EAAA,EAbA;AAcA,QAAA,MAAA,EAAA,EAdA;AAeA,QAAA,KAAA,EAAA,EAfA;AAgBA,QAAA,MAAA,EAAA,EAhBA;AAiBA,QAAA,OAAA,EAAA,GAjBA;AAkBA,QAAA,QAAA,EAAA,KAlBA;AAmBA,QAAA,IAAA,EAAA,KAnBA;AAoBA,QAAA,IAAA,EAAA;AApBA,OANA;AA4BA,MAAA,gBAAA,EAAA,EA5BA;AA6BA,MAAA,gBAAA,EAAA,EA7BA;AA8BA,MAAA,gBAAA,EAAA;AA9BA,KAAA;AAgCA,GAlCA;AAmCA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,UAAA,GAAA,GAAA,CAAA,KAAA,IAAA,CAAA,KAAA,GAAA,KAAA,IAAA,CAAA,WAAA,GAAA,EAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,GAAA;;AACA,cAAA,GAAA;AACA,aAAA,KAAA;AACA,iBAAA,EAAA;AACA;;AACA,aAAA,UAAA;AACA,iBAAA,EAAA;AACA;;AACA;AACA,iBAAA,GAAA;AACA;AATA;AAWA;AAfA,GAnCA;AAoDA,EAAA,OApDA,qBAoDA;AAAA;;AACA,QAAA,MAAA,GAAA,IAAA,CAAA,CAAA,KAAA,KAAA,CAAA,OAAA,EAAA,KAAA,KAAA,CAAA,MAAA,CAAA;AACA,IAAA,MAAA,CAAA,YAAA,CAAA,MAAA,GAAA,GAAA,CAFA,CAGA;;AACA,IAAA,MAAA,CAAA,YAAA,CAAA,eAAA,GAAA,qBAAA;AACA,IAAA,MAAA,CAAA,YAAA,CAAA,cAAA,GAAA,MAAA,CALA,CAMA;;AACA,IAAA,MAAA,CAAA,YAAA,CAAA,gBAAA,GAAA;AACA,MAAA,aAAA,mBAAA,cAAA,CAAA,KAAA;AADA,KAAA,CAPA,CAUA;;AACA,IAAA,MAAA,CAAA,YAAA,CAAA,QAAA,GAAA,UAAA,IAAA,EAAA;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,MAAA,GAAA,IAAA;AACA,KAFA;;AAGA,IAAA,MAAA,CAAA,MAAA;AACA,GAnEA;AAoEA,EAAA,OApEA,qBAoEA;AACA,SAAA,gBAAA,CAAA,CAAA,EAAA,UAAA;AACA,GAtEA;AAuEA,EAAA,KAAA,EAAA;AACA,mBADA,wBACA,QADA,EACA,QADA,EACA;AACA,WAAA,gBAAA,CAAA,QAAA,EAAA,UAAA;AACA,KAHA;AAIA,mBAJA,wBAIA,QAJA,EAIA,QAJA,EAIA;AACA,WAAA,gBAAA,CAAA,QAAA,EAAA,UAAA;AACA;AANA,GAvEA;AA+EA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,gBAFA,4BAEA,EAFA,EAEA,IAFA,EAEA;AAAA;;AACA,UAAA,CAAA,EAAA,EAAA;AACA,eAAA,KAAA;AACA;;AACA,WAAA,UAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,UAAA,CAAA,GAAA,IAAA,CADA,CAEA;;AACA,YAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,EAAA;AACA,iBAAA,KAAA;AACA,SANA,CAOA;;;AACA,QAAA,MAAA,CAAA,IAAA,CAAA,IAAA,IAAA,IAAA,CAAA,CAAA,CAAA,CAAA,EAAA;AACA,OATA;AAUA,KAhBA;AAiBA;AACA,IAAA,UAlBA;AAAA;AAAA;AAAA,+CAkBA,EAlBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAmBA,QAAA,CAAA,IAAA,CAAA;AAAA,kBAAA,GAAA,EAAA;AAAA,iBAAA,CAnBA;;AAAA;AAAA;AAmBA,gBAAA,MAnBA,QAmBA,MAnBA;AAmBA,gBAAA,IAnBA,QAmBA,IAnBA;AAmBA,gBAAA,GAnBA,QAmBA,GAnBA;;AAAA,qBAoBA,MApBA;AAAA;AAAA;AAAA;;AAAA,iDAqBA,OAAA,CAAA,OAAA,CAAA,IAAA,CArBA;;AAAA;AAuBA,qBAAA,QAAA,CAAA,KAAA,CAAA,GAAA;;AAvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA0BA,IAAA,iBA1BA,oCA0BA;AAAA,UAAA,MAAA,SAAA,MAAA;AAAA,UAAA,KAAA,SAAA,KAAA;AAAA,UAAA,KAAA,SAAA,KAAA;;AACA,UAAA,MAAA,EAAA;AACA,aAAA,IAAA,CAAA,MAAA,GAAA,KAAA;AACA,aAAA,IAAA,CAAA,MAAA,GAAA,KAAA;AACA;AACA,KA/BA;AAgCA,IAAA,WAhCA,8BAgCA,IAhCA,EAgCA,QAhCA,EAgCA;AAAA,UAAA,MAAA,SAAA,MAAA;AAAA,UAAA,OAAA,SAAA,OAAA;;AACA,cAAA,MAAA;AACA,aAAA,GAAA;AACA,eAAA,QAAA,CAAA,KAAA;AACA;;AACA,aAAA,GAAA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,KAAA,CAAA,OAAA,CAAA;AACA,eAAA,QAAA,CAAA,KAAA,4BAAA,OAAA,CAAA,GAAA;AACA;;AACA;AACA,eAAA,QAAA,CAAA,KAAA,wBAAA,MAAA,cAAA,OAAA;AACA;AAVA;AAYA,KA7CA;AA8CA,IAAA,kBA9CA,8BA8CA,IA9CA,EA8CA;AACA,UAAA,GAAA,GAAA,sBAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,GAAA,CAAA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,uBAAA;AACA;;AACA,UAAA,CAAA,MAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,mBAAA;AACA;;AACA,aAAA,KAAA,IAAA,MAAA;AACA,KAzDA;AA0DA,IAAA,sBA1DA;AAAA;AAAA;AAAA,gDA0DA,IA1DA,EA0DA,QA1DA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA4DA,MAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,GAAA,EAAA,MAAA,IAAA,CAAA,QAAA,CAAA;AAAA,iBAAA,CA5DA;;AAAA;AA4DA,gBAAA,IA5DA;AAAA;AAAA,uBA6DA,MAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,GAAA,EAAA,MAAA,IAAA,CAAA,QAAA,CAAA;AAAA,iBAAA,CA7DA;;AAAA;AA6DA,gBAAA,IA7DA;;AAAA,sBA8DA,IAAA,CAAA,MAAA,IAAA,IAAA,CAAA,MA9DA;AAAA;AAAA;AAAA;;AA+DA;AACA,qBAAA,IAAA,CAAA,MAAA,GAAA,EAAA;AACA,qBAAA,IAAA,CAAA,MAAA,GAAA,EAAA;AAjEA,kDAkEA,IAlEA;;AAAA;AAAA,kDAoEA,KApEA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAuEA,qBAAA,QAAA,CAAA,KAAA;;AAvEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA0EA,IAAA,iBA1EA,6BA0EA,IA1EA,EA0EA;AACA,WAAA,cAAA,GAAA,IAAA,CAAA,GAAA;AACA,WAAA,aAAA,GAAA,IAAA;AACA,KA7EA;AA8EA,IAAA,gBA9EA,4BA8EA,KA9EA,EA8EA,QA9EA,EA8EA;AACA,WAAA,QAAA,CAAA,OAAA,yGAAA,KAAA,CAAA,MAAA,+DAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,KAhFA;AAiFA,IAAA,mBAjFA,+BAiFA,QAjFA,EAiFA,IAjFA,EAiFA,QAjFA,EAiFA;AACA,UAAA,QAAA,CAAA,MAAA,EAAA;AACA,aAAA,IAAA,CAAA,MAAA,GAAA,KAAA,eAAA,CAAA,QAAA,CAAA;AACA;AACA,KArFA;AAsFA,IAAA,kBAtFA,8BAsFA,KAtFA,EAsFA,QAtFA,EAsFA;AACA,WAAA,QAAA,CAAA,OAAA,yGAAA,KAAA,CAAA,MAAA,+DAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,MAAA;AACA,KAxFA;AAyFA,IAAA,wBAzFA;AAAA;AAAA;AAAA,gDAyFA,IAzFA,EAyFA,QAzFA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA0FA,MAAA,CAAA,MAAA,CAAA;AAAA,kBAAA,GAAA,EAAA,MAAA,IAAA,CAAA,QAAA,CAAA;AAAA,iBAAA,CA1FA;;AAAA;AAAA;AA0FA,gBAAA,MA1FA,SA0FA,MA1FA;;AAAA,qBA2FA,MA3FA;AAAA;AAAA;AAAA;;AA4FA,gBAAA,CA5FA,GA4FA,QAAA,CAAA,SAAA,CAAA,UAAA,IAAA;AAAA,yBAAA,IAAA,CAAA,GAAA,IAAA,IAAA,CAAA,QAAA,CAAA,GAAA;AAAA,iBAAA,CA5FA;AA6FA,gBAAA,IA7FA,sBA6FA,QA7FA;AA8FA,gBAAA,IAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA,qBAAA,IAAA,CAAA,MAAA,GAAA,KAAA,eAAA,CAAA,IAAA,CAAA;AA/FA,kDAgGA,IAhGA;;AAAA;AAAA,kDAkGA,KAlGA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAqGA;AACA,IAAA,eAtGA,2BAsGA,QAtGA,EAsGA;AACA,UAAA,GAAA,GAAA,EAAA;AACA,MAAA,QAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,QAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,GAAA;AACA,OAFA;AAGA,aAAA,GAAA,CAAA,QAAA,EAAA;AACA,KA5GA;AA6GA;AACA,IAAA,aA9GA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA+GA,KAAA,CAAA,OAAA,mBAAA,KAAA,IAAA,EA/GA;;AAAA;AAAA;AA+GA,gBAAA,MA/GA,SA+GA,MA/GA;;AAgHA,oBAAA,MAAA,EAAA;AACA,uBAAA,QAAA,CAAA,OAAA,CAAA,SAAA;AACA;;AAlHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA/EA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<el-card class=\"box-card\">\n\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t<span>发布新商品</span>\n\t\t\t</div>\n\t\t\t<el-form ref=\"form\" :model=\"form\" label-position=\"left\" label-width=\"120px\">\n\t\t\t\t<el-form-item label=\"商品分类\">\n\t\t\t\t\t<el-select v-model=\"form.cate_1st\" placeholder=\"请选择分类\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_1st_options\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t\t<el-select v-model=\"form.cate_2nd\" placeholder=\"请选择分类\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_2nd_options\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t\t<el-select v-model=\"form.cate_3rd\" placeholder=\"请选择分类\">\n\t\t\t\t\t\t<el-option v-for=\"item in cate_3rd_options\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品名称\">\n\t\t\t\t\t<el-col :span=\"14\">\n\t\t\t\t\t\t<el-input v-model.trim=\"form.name\"></el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">商品标题名称长度至少3个字符，最长200个汉字</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品卖点\">\n\t\t\t\t\t<el-col :span=\"14\">\n\t\t\t\t\t\t<el-input type=\"textarea\" v-model.trim=\"form.hotPoint\"></el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">商品卖点不能超过140个汉字</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品价格\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim.number=\"form.price\">\n\t\t\t\t\t\t\t<template slot=\"append\">元</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">价格必须是0-999999之间的数字，且不能高于市场价</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">此价格为商品实际销售价格，如果商品存在规格，改价格显示最低价格</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"市场价\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim.number=\"form.marketPrice\">\n\t\t\t\t\t\t\t<template slot=\"append\">元</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">价格必须是0-999999之间的数字，此价格仅为市场参考价，请根据实际情况认真填写</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"成本价\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim.number=\"form.cost\">\n\t\t\t\t\t\t\t<template slot=\"append\">元</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">价格必须是0-999999之间的数字，此价格为商户对所销售的商品的实际成本价进行备注记录，非必填选项，不会在前台销售页面中显示</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"折扣\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input readonly v-model=\"discount\">\n\t\t\t\t\t\t\t<template slot=\"append\">折</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">根据销售价与市场价比例自动生成不需要编辑</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品库存\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim.number=\"form.inventory\">\n\t\t\t\t\t\t\t<template slot=\"append\">件</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">价格必须是0-999999之间的整数</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">若启动了库存配置，则系统自动计算商品的总数，此处无需卖家填写</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品货号\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim=\"form.articleNo\"></el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">商品货号是商家管理商品的编号，买家不可见</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">最多输入20个字符，只支持输入中文、字母、数字、_、/、-和小数点</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品主图\">\n\t\t\t\t\t<el-upload :limit=\"1\" list-type=\"picture-card\" action=\"/api/upload/goods/\" :headers=\"headers\" :before-upload=\"handleBeforeUpload\"\n\t\t\t\t\t :on-success=\"handleMainSuccess\" :before-remove=\"handleMainBeforeRemove\" :on-exceed=\"handleMainExceed\" :on-error=\"handleError\"\n\t\t\t\t\t :on-preview=\"handleCardPreview\">\n\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\n\t\t\t\t\t</el-upload>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品轮播图\">\n\t\t\t\t\t<el-upload :limit=\"6\" list-type=\"picture-card\" action=\"/api/upload/slider/\" :headers=\"headers\" :before-upload=\"handleBeforeUpload\"\n\t\t\t\t\t :on-success=\"handleSliderSuccess\" :on-exceed=\"handleSliderExceed\" :before-remove=\"handleSliderBeforeRemove\"\n\t\t\t\t\t :on-error=\"handleError\" :on-preview=\"handleCardPreview\">\n\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\n\t\t\t\t\t</el-upload>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">上传商品默认主图，如多规格时将默认图片或分规格上传规格主图，支持jpg、if、png格式上传或从图片空间选中，建议使用尺寸\n\t\t\t\t\t\t800*800像素以上，大小不超过1M的正方形图片，上传后的图片将自动保存在图片空间的默认分类中</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<div class=\"section-title\">商品详情描述</div>\n\t\t\t\t<el-form-item label=\"商品品牌\">\n\t\t\t\t\t<el-col :span=\"14\">\n\t\t\t\t\t\t<el-input v-model.trim=\"form.brand\"></el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"商品描述\">\n\t\t\t\t\t<div ref=\"toolbar\" class=\"w-e-toolbar\"></div>\n\t\t\t\t\t<div ref=\"editor\" class=\"w-e-text-container\"></div>\n\t\t\t\t</el-form-item>\n\t\t\t\t<div class=\"section-title\">商品物流信息</div>\n\t\t\t\t<el-form-item label=\"所在地\">\n\t\t\t\t\t<el-select v-model=\"form.province\" placeholder=\"请选择活动区域\">\n\t\t\t\t\t\t<el-option label=\"区域一\" value=\"shanghai\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域二\" value=\"beijing\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域三\" value=\"beijing\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t\t<el-select v-model=\"form.city\" placeholder=\"请选择活动区域\">\n\t\t\t\t\t\t<el-option label=\"区域一\" value=\"shanghai\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域二\" value=\"beijing\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域三\" value=\"beijing\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t\t<el-select v-model=\"form.area\" placeholder=\"请选择活动区域\">\n\t\t\t\t\t\t<el-option label=\"区域一\" value=\"shanghai\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域二\" value=\"beijing\"></el-option>\n\t\t\t\t\t\t<el-option label=\"区域三\" value=\"beijing\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"运费\">\n\t\t\t\t\t<el-col :span=\"3\">\n\t\t\t\t\t\t<el-input v-model.trim=\"form.freight\">\n\t\t\t\t\t\t\t<template slot=\"append\">元</template>\n\t\t\t\t\t\t</el-input>\n\t\t\t\t\t</el-col>\n\t\t\t\t\t<el-col :span=\"24\" class=\"tip\">运费设为0，前台商品将显示免运费</el-col>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"success\" @click=\"releaseHandle\">提交</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t</el-form>\n\t\t\t<!-- 图片预览 -->\n\t\t\t<el-dialog width=\"30%\" :visible.sync=\"dialogVisible\">\n\t\t\t\t<img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n\t\t\t</el-dialog>\n\t\t</el-card>\n\t</div>\n</template>\n<script>\n\timport { Upload, Category, Goods } from '@/api/index';\n\timport E from \"wangeditor\";\n\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdialogImageUrl: '',\n\t\t\t\tdialogVisible: false,\n\t\t\t\theaders: {\n\t\t\t\t\tAuthorization: `Bearer ${sessionStorage.token}`\n\t\t\t\t},\n\t\t\t\tform: {\n\t\t\t\t\tcate_1st: \"\",\n\t\t\t\t\tcate_2nd: \"\",\n\t\t\t\t\tcate_3rd: \"\",\n\t\t\t\t\thotPoint: \"\",\n\t\t\t\t\tname: \"\",\n\t\t\t\t\tprice: \"\",\n\t\t\t\t\tmarketPrice: \"\",\n\t\t\t\t\tcost: \"\",\n\t\t\t\t\tdiscount: \"\",\n\t\t\t\t\tinventory: \"\",\n\t\t\t\t\tarticleNo: \"\",\n\t\t\t\t\timg_lg: \"\",\n\t\t\t\t\timg_md: \"\",\n\t\t\t\t\tslider: \"\",\n\t\t\t\t\tbrand: \"\",\n\t\t\t\t\tdetail: \"\",\n\t\t\t\t\tfreight: \"0\",\n\t\t\t\t\tprovince: \"山东省\",\n\t\t\t\t\tcity: \"青岛市\",\n\t\t\t\t\tarea: \"城阳区\",\n\t\t\t\t},\n\t\t\t\tcate_1st_options: [],\n\t\t\t\tcate_2nd_options: [],\n\t\t\t\tcate_3rd_options: [],\n\t\t\t};\n\t\t},\n\t\tcomputed: {\n\t\t\tdiscount() {\n\t\t\t\tlet num = (this.form.price / this.form.marketPrice * 10).toFixed(2);\n\t\t\t\tthis.form.discount = num;\n\t\t\t\tswitch (num) {\n\t\t\t\t\tcase 'NaN':\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Infinity':\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn num;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\tmounted() {\n\t\t\tconst editor = new E(this.$refs.toolbar, this.$refs.editor);\n\t\t\teditor.customConfig.zIndex = 100\n\t\t\t//配置上传图片\n\t\t\teditor.customConfig.uploadImgServer = '/api/upload/editor/';\n\t\t\teditor.customConfig.uploadFileName = 'file';\n\t\t\t// 配置header信息\n\t\t\teditor.customConfig.uploadImgHeaders = {\n\t\t\t\tAuthorization: `Bearer ${sessionStorage.token}`\n\t\t\t};\n\t\t\t//同步HTML代码至data\n\t\t\teditor.customConfig.onchange = html => {\n\t\t\t\tthis.form.detail = html;\n\t\t\t};\n\t\t\teditor.create();\n\t\t},\n\t\tcreated() {\n\t\t\tthis.cateChangeHandle(1, 'cate_1st');\n\t\t},\n\t\twatch: {\n\t\t\t'form.cate_1st'(newValue, oldValue) {\n\t\t\t\tthis.cateChangeHandle(newValue, 'cate_2nd');\n\t\t\t},\n\t\t\t'form.cate_2nd'(newValue, oldValue) {\n\t\t\t\tthis.cateChangeHandle(newValue, 'cate_3rd');\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\t//分类change事件\n\t\t\tcateChangeHandle(id, cate) {\n\t\t\t\tif (!id) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tthis.getOptions(id).then((data) => {\n\t\t\t\t\tthis[cate + '_options'] = data;\n\t\t\t\t\t//如果数组为空，下一级分类设置为空\n\t\t\t\t\tif (data.length == 0) {\n\t\t\t\t\t\tthis.form[cate] = '';\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\t//默认选择数组第一项\n\t\t\t\t\tthis.form[cate] = data[0].id;\n\t\t\t\t});\n\t\t\t},\n\t\t\t//获取下一级分类\n\t\t\tasync getOptions(id) {\n\t\t\t\tlet { status, data, msg } = await Category.load({ pId: id });\n\t\t\t\tif (status) {\n\t\t\t\t\treturn Promise.resolve(data);\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(msg);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleMainSuccess({ status, lgImg, mdImg }) {\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.form.img_lg = lgImg;\n\t\t\t\t\tthis.form.img_md = mdImg;\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleError({ status, message }, file, fileList) {\n\t\t\t\tswitch (status) {\n\t\t\t\t\tcase 401:\n\t\t\t\t\t\tthis.$message.error(`错误:401,Token失效,请重新登录!`);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 400:\n\t\t\t\t\t\tmessage = JSON.parse(message);\n\t\t\t\t\t\tthis.$message.error(`错误:400,${message.msg}`);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthis.$message.error(`错误:${status},${message}!`);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleBeforeUpload(file) {\n\t\t\t\tlet reg = /^image\\/(jpe?g|png)$/;\n\t\t\t\tconst isImg = reg.test(file.type);\n\t\t\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\n\t\t\t\tif (!isImg) {\n\t\t\t\t\tthis.$message.error('上传头像图片只能是 JPG/PNG 格式!');\n\t\t\t\t}\n\t\t\t\tif (!isLt2M) {\n\t\t\t\t\tthis.$message.error('上传头像图片大小不能超过 2MB!');\n\t\t\t\t}\n\t\t\t\treturn isImg && isLt2M;\n\t\t\t},\n\t\t\tasync handleMainBeforeRemove(file, fileList) {\n\t\t\t\ttry {\n\t\t\t\t\tlet res1 = await Upload.remove({ src: '.' + file.response.lgImg });\n\t\t\t\t\tlet res2 = await Upload.remove({ src: '.' + file.response.mdImg });\n\t\t\t\t\tif (res1.status && res2.status) {\n\t\t\t\t\t\t//清空图片\n\t\t\t\t\t\tthis.form.img_lg = '';\n\t\t\t\t\t\tthis.form.img_md = '';\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.$message.error(e);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleCardPreview(file) {\n\t\t\t\tthis.dialogImageUrl = file.url;\n\t\t\t\tthis.dialogVisible = true;\n\t\t\t},\n\t\t\thandleMainExceed(files, fileList) {\n\t\t\t\tthis.$message.warning(`当前限制选择 1 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n\t\t\t},\n\t\t\thandleSliderSuccess(response, file, fileList) {\n\t\t\t\tif (response.status) {\n\t\t\t\t\tthis.form.slider = this.convertFileList(fileList);\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleSliderExceed(files, fileList) {\n\t\t\t\tthis.$message.warning(`当前限制选择 6 个文件，本次选择了 ${files.length} 个文件，共选择了 ${files.length + fileList.length} 个文件`);\n\t\t\t},\n\t\t\tasync handleSliderBeforeRemove(file, fileList) {\n\t\t\t\tlet { status } = await Upload.remove({ src: \".\" + file.response.src });\n\t\t\t\tif (status) {\n\t\t\t\t\tlet i = fileList.findIndex(item => item.url == file.response.src);\n\t\t\t\t\tlet copy = [...fileList];\n\t\t\t\t\tcopy.splice(i, 1);\n\t\t\t\t\tthis.form.slider = this.convertFileList(copy);\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t//转换数据格式\n\t\t\tconvertFileList(fileList) {\n\t\t\t\tlet res = [];\n\t\t\t\tfileList.forEach(function(item, index) {\n\t\t\t\t\tres.push(item.response.src);\n\t\t\t\t});\n\t\t\t\treturn res.toString();\n\t\t\t},\n\t\t\t//发布商品\n\t\t\tasync releaseHandle() {\n\t\t\t\tlet { status } = await Goods.release({ ...this.form });\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.$message.success('发布商品成功！');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n</script>\n<style scoped>\n\t.tip {\n\t\tfont-size: 12px;\n\t\tcolor: #999;\n\t}\n\n\t.section-title {\n\t\tbackground-color: #f5f5f5;\n\t\tpadding: 10px;\n\t\tmargin-bottom: 10px;\n\t}\n\n\t.el-upload img {\n\t\tmax-width: 100%;\n\t}\n\n\t.w-e-toolbar {\n\t\tborder: 1px solid #ccc;\n\t\tborder-bottom: 0;\n\t}\n\n\t.w-e-text-container {\n\t\tborder: 1px solid #ccc;\n\t\tmin-height: 1500px;\n\t\theight: 1500px;\n\t}\n</style>\n"],"sourceRoot":"src/views/Goods"}]}