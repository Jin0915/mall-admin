{"remainingRequest":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/User/Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/src/views/User/Info.vue","mtime":1573870081730},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Desktop/上课教材资源/vue商城项目/mall-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/mac/Desktop/\\u4E0A\\u8BFE\\u6559\\u6750\\u8D44\\u6E90/vue\\u5546\\u57CE\\u9879\\u76EE/mall-admin/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//引入service模块\nimport { User, Role } from '@/api/index';\nimport SingleUpload from '@/components/SingleUpload.vue';\nexport default {\n  components: {\n    SingleUpload: SingleUpload\n  },\n  data: function data() {\n    return {\n      roles: [],\n      form: {}\n    };\n  },\n  created: function created() {\n    this.loadRole(); // 双向数据绑定，vuex中的state不适合用计算属性\n\n    this.form = _objectSpread({}, this.$store.state.User.userInfo);\n  },\n  methods: {\n    loadRole: function () {\n      var _loadRole = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _ref, status, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return Role.list();\n\n              case 2:\n                _ref = _context.sent;\n                status = _ref.status;\n                data = _ref.data;\n\n                if (status) {\n                  this.roles = data;\n                }\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadRole() {\n        return _loadRole.apply(this, arguments);\n      }\n\n      return loadRole;\n    }(),\n    // 修改账户信息\n    updateInfo: function updateInfo() {\n      var _this = this;\n\n      var role = this.form.role;\n      this.$store.dispatch('User/Update', _objectSpread({}, this.form)).then(function (res) {\n        if (res.status) {\n          sessionStorage.role = role;\n\n          _this.$message.success(res.msg);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["Info.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA,SAAA,IAAA,EAAA,IAAA,QAAA,aAAA;AACA,OAAA,YAAA,MAAA,+BAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,YAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA;AAFA,KAAA;AAIA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,QAAA,GADA,CAEA;;AACA,SAAA,IAAA,qBAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,QAAA;AACA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,QADA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEA,IAAA,CAAA,IAAA,EAFA;;AAAA;AAAA;AAEA,gBAAA,MAFA,QAEA,MAFA;AAEA,gBAAA,IAFA,QAEA,IAFA;;AAGA,oBAAA,MAAA,EAAA;AACA,uBAAA,KAAA,GAAA,IAAA;AACA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAOA;AACA,IAAA,UARA,wBAQA;AAAA;;AAAA,UACA,IADA,GACA,KAAA,IADA,CACA,IADA;AAEA,WAAA,MAAA,CAAA,QAAA,CAAA,aAAA,oBAAA,KAAA,IAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,EAAA;AACA,UAAA,cAAA,CAAA,IAAA,GAAA,IAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA;AACA,OALA;AAMA;AAhBA;AAfA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<el-card class=\"box-card\">\n\t\t\t<div slot=\"header\" class=\"clearfix\">\n\t\t\t\t<span>账户信息</span>\n\t\t\t</div>\n\t\t\t<el-form :model=\"form\" label-position=\"left\" label-width=\"100px\">\n\t\t\t\t<el-form-item label=\"账户\">\n\t\t\t\t\t<el-input v-model=\"form.username\" disabled auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"姓名\">\n\t\t\t\t\t<el-input v-model=\"form.fullname\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"性别\">\n\t\t\t\t\t<el-radio-group v-model=\"form.sex\">\n\t\t\t\t\t\t<el-radio label=\"男\">男</el-radio>\n\t\t\t\t\t\t<el-radio label=\"女\">女</el-radio>\n\t\t\t\t\t</el-radio-group>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机\">\n\t\t\t\t\t<el-input v-model.number=\"form.tel\" auto-complete=\"off\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"权限\">\n\t\t\t\t\t<el-select v-model=\"form.role\" placeholder=\"请选择账户\">\n\t\t\t\t\t\t<el-option v-for=\"item in roles\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"头像\">\n\t\t\t\t\t<single-upload default-image=\"/images/avatar/default.jpg\" action=\"/api/upload/avatar/\" :url.sync=\"form.avatar\" />\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-button type=\"primary\" @click=\"updateInfo\">修 改</el-button>\n\t\t\t</el-form>\n\t\t</el-card>\n\t</div>\n</template>\n\n<script>\n\t//引入service模块\n\timport { User, Role } from '@/api/index';\n\timport SingleUpload from '@/components/SingleUpload.vue';\n\n\texport default {\n\t\tcomponents: {\n\t\t\tSingleUpload,\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\troles: [],\n\t\t\t\tform: {}\n\t\t\t};\n\t\t},\n\t\tcreated() {\n\t\t\tthis.loadRole();\n\t\t\t// 双向数据绑定，vuex中的state不适合用计算属性\n\t\t\tthis.form = { ...this.$store.state.User.userInfo };\n\t\t},\n\t\tmethods: {\n\t\t\tasync loadRole() {\n\t\t\t\tlet { status, data } = await Role.list();\n\t\t\t\tif (status) {\n\t\t\t\t\tthis.roles = data;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 修改账户信息\n\t\t\tupdateInfo() {\n\t\t\t\tlet { role } = this.form;\n\t\t\t\tthis.$store.dispatch('User/Update', { ...this.form }).then((res) => {\n\t\t\t\t\tif (res.status) {\n\t\t\t\t\t\tsessionStorage.role = role;\n\t\t\t\t\t\tthis.$message.success(res.msg);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\t.el-form {\n\t\twidth: 70%;\n\t\tmargin: 0 auto;\n\t}\n\n\t.avatar-uploader .el-upload {\n\t\tborder: 1px dashed #d9d9d9;\n\t\tborder-radius: 6px;\n\t\tcursor: pointer;\n\t\tposition: relative;\n\t\toverflow: hidden;\n\n\t\t&:hover {\n\t\t\tborder-color: #409EFF;\n\t\t}\n\n\t\t.avatar-uploader-icon {\n\t\t\tfont-size: 28px;\n\t\t\tcolor: #8c939d;\n\t\t\twidth: 178px;\n\t\t\theight: 178px;\n\t\t\tline-height: 178px;\n\t\t\ttext-align: center;\n\t\t}\n\n\t\t.avatar {\n\t\t\twidth: 178px;\n\t\t\theight: 178px;\n\t\t\tdisplay: block;\n\t\t}\n\t}\n</style>\n"],"sourceRoot":"src/views/User"}]}